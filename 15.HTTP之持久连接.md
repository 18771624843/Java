# 15.HTTP之持久连接

```java
public static void main(String[] args) throws UnknownHostException, IOException {
	Socket socket = new Socket("localhost", 8080);

	BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));

	new Thread(() -> {
		try {
			BufferedReader br = new BufferedReader(new InputStreamReader(socket.getInputStream()));

			String line = null;
			while ((line = br.readLine()) != null) { // 迭代输出的文本
				System.out.println(line);
			}

			br.close();
			bw.close();
			socket.close();
		} catch (Exception e) {
			e.printStackTrace();
		}
	}).start();

	bw.write("GET /springmvc/ HTTP/1.1\r\n");
	bw.write("HOST: localhost:8080\r\n");
	bw.write("Connection: keep-alive\r\n");
	bw.write("\r\n");
	bw.flush();

	bw.write("GET /springmvc/ HTTP/1.1\r\n");
	bw.write("HOST: localhost:8080\r\n");
	bw.write("Connection: close\r\n");
	bw.write("\r\n");
	bw.flush();
}
```

```http
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Set-Cookie: JSESSIONID=C1CC998B1DF491A2AA2DFC874624E247; Path=/springmvc/; HttpOnly
Content-Type: text/html;charset=ISO-8859-1
Content-Language: zh-CN
Content-Length: 89
Date: Mon, 28 Apr 2014 10:25:25 GMT


<html>
<head>
<title>Home</title>
</head>
<body>
	<h1>Hello world!</h1>
</body>
</html>
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Set-Cookie: JSESSIONID=3E421B3CB47418054E0DDDA6BCB4CBD0; Path=/springmvc/; HttpOnly
Content-Type: text/html;charset=ISO-8859-1
Content-Language: zh-CN
Content-Length: 89
Date: Mon, 28 Apr 2014 10:25:25 GMT
Connection: close


<html>
<head>
<title>Home</title>
</head>
<body>
	<h1>Hello world!</h1>
</body>
</html>
```
